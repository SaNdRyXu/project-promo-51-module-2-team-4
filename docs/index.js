(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const w=document.querySelector("#background-choice"),j=document.querySelector("#custom-image-upload"),p=document.querySelector("#custom-image");document.querySelector(".js-preview-cover");w.addEventListener("change",function(){w.value==="custom"?j.classList.remove("hidden"):(j.classList.add("hidden"),p.value="",k())});p.addEventListener("change",function(){const e=p.files[0];if(e&&e.type.startsWith("image/")){const t=new FileReader;t.onload=function(s){const c=s.target.result;d.style.backgroundImage=`url('${c}')`},t.readAsDataURL(e)}else alert("Por favor, selecciona una imagen válida.")});const d=document.querySelector(".js-preview-cover");d.style.backgroundImage="url('/images/fantasy.png')";const f=d.querySelector(".js-cover-title"),D=document.querySelectorAll('input[name="theme"]');function k(){const e=document.querySelector('input[name="theme"]:checked').value,t=document.querySelector("#background-choice").value;f.classList.remove("fantasy-title","simulation-title","action-title","horror-title"),e==="Fantasía"?(t!=="custom"&&(d.style.backgroundImage="url('/images/fantasy.png')"),f.classList.add("fantasy-title")):e==="Simulación"?(t!=="custom"&&(d.style.backgroundImage="url('/images/simulation_6.png')"),f.classList.add("simulation-title")):e==="Acción"?(t!=="custom"&&(d.style.backgroundImage="url('/images/action.png')"),f.classList.add("action-title")):e==="Terror"&&(t!=="custom"&&(d.style.backgroundImage="url('/images/horror_5.png')"),f.classList.add("horror-title"))}D.forEach(e=>{e.addEventListener("change",k)});const I=document.querySelector(".js-input-tittle"),$=document.querySelector(".js-cover-title");document.addEventListener("DOMContentLoaded",function(){I.addEventListener("input",function(){const e=I.value.trim();$.textContent=e||"Sin título"})});const m=document.querySelector(".js-cover-subtitle"),M=document.querySelectorAll('input[name="theme"]'),E=document.querySelector(".js-input-subtitle");function C(){const e=E.value.trim();if(m.textContent=e,m.classList.remove("fantasy-subtitle","action-subtitle","simulation-subtitle","horror-subtitle"),!e)return;const t=document.querySelector('input[name="theme"]:checked').value;t==="Fantasía"?m.classList.add("fantasy-subtitle"):t==="Simulación"?m.classList.add("simulation-subtitle"):t==="Acción"?m.classList.add("action-subtitle"):t==="Terror"&&m.classList.add("horror-subtitle")}E.addEventListener("input",C);M.forEach(e=>{e.addEventListener("change",C)});const V=document.querySelectorAll('input[name="platform"]');document.querySelector(".js-imgrightbutton");function T(){const e=document.querySelector('input[name="platform"]:checked').value,t=document.getElementById("previewTop"),s=document.getElementById("previewimagePlatform");t.className="preview-top",s.src="images/ps5.svg",s.alt="Imagen de PS5",e==="PS5"?(s.src="images/ps5.svg",s.alt="Imagen de PS5"):e==="PC"?(s.src="images/pc.svg",s.alt="Imagen de PC",t.className="preview-pc"):e==="Xbox"?(s.src="images/xbox.svg",s.alt="Imagen de Xbox",t.className="preview-xbox"):e==="Switch"&&(s.src="images/switch.svg",s.alt="Imagen de Nintendo Switch",t.className="preview-switch")}V.forEach(e=>{e.addEventListener("change",T)});T();const x=document.querySelector(".js-input-age"),u=document.querySelector(".js-box");function B(){const e=parseInt(x.value);u.innerHTML=e,u.classList.remove("preview-age-rojo","preview-age-naranja","preview-age-amarillo","preview-age"),isNaN(e)||e<3||e>18?(u.innerHTML="7",u.classList.add("preview-age")):e>=12&&e<18?u.classList.add("preview-age-naranja"):e===18?u.classList.add("preview-age-rojo"):u.classList.add("preview-age")}x.addEventListener("input",B);const g=document.querySelector(".js-company"),a=document.querySelector(".js-cover-company");function F(){g.value==="ubisoft"?(a.src="images/ubisoft.svg",a.alt="Ubisoft Entertainment S. A."):g.value==="nintendo"?(a.src="images/nintendo.svg",a.alt="Nintendo Company, Ltd."):g.value==="bethesda"?(a.src="images/bethesda.svg",a.alt="Bethesda Softworks LLC"):g.value==="activision"?(a.src="images/activision.svg",a.alt="Activision Publishing, Inc."):g.value==="sega"?(a.src="images/sega.svg",a.alt="Sega Corporation"):(a.src="images/ea.svg",a.alt="Electronic Arts Inc.")}g.addEventListener("change",F);const _=document.querySelector(".js-save-button"),U=document.querySelector(".js-prelink");function J(){var S,b,L;const e=document.querySelector("#title").value.trim()||"Sin título",t=document.querySelector("#subtitle").value.trim()||"Sin subtítulo",s=parseInt(document.querySelector("#age").value,10)||7,c=(S=document.querySelector('input[name="platform"]:checked'))==null?void 0:S.value,o=(b=document.querySelector("#company"))==null?void 0:b.value,n=document.querySelector("#background-choice").value||"preset",l=document.querySelector(".js-preview-cover").style.backgroundImage,h=((L=document.querySelector('input[name="theme"]:checked'))==null?void 0:L.value)||"Fantasía",i={field1:parseInt(n==="custom"?1:2),field2:e,field3:t,field4:h,field5:s,field6:c?`images/${c.toLowerCase()}.svg`:"",field7:o?`images/${o.toLowerCase()}.svg`:""};if(n==="custom"&&l&&l.startsWith('url("data:image')){const r=l.match(/^url\(["']?(.+?)["']?\)$/);i.photo=r?r[1]:""}else switch(h){case"Fantasía":i.photo="images/fantasy.png";break;case"Simulación":i.photo="images/simulation_6.png";break;case"Acción":i.photo="images/action.png";break;case"Terror":i.photo="images/horror_5.png";break;default:i.photo="images/fantasy.png"}console.log("Enviando datos:",i),localStorage.setItem("formData",JSON.stringify(i)),fetch("https://dev.adalab.es/api/info/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(r=>r.json()).then(r=>{if(r.success){console.log("Respuesta del servidor:",r),localStorage.setItem("apiData",JSON.stringify(r));const q=`result.html?id=${r.infoID}`,A=document.querySelector(".js-url-result");U.classList.remove("hidden"),A.innerHTML=`<a href="${q}" target="_blank">${q}</a>`}else console.error("Error en la respuesta del servidor:",r.error)}).catch(r=>{console.error("Error en la petición fetch:",r)})}_.addEventListener("click",function(e){e.preventDefault(),J()});const v=document.querySelector(".js-toggle-design"),y=document.querySelector(".js-toggle-fill"),P=document.querySelector(".background-choice"),N=document.querySelector(".fill_options");function O(e,t,s,c){const o=!t.classList.contains("hidden");t.classList.toggle("hidden"),e.textContent=o?"➕":"➖",c.classList.add("hidden"),s.textContent="➕"}v.addEventListener("click",()=>{O(v,P,y,N)});y.addEventListener("click",()=>{O(y,N,v,P)});document.addEventListener("DOMContentLoaded",()=>{const e=JSON.parse(localStorage.getItem("formData"));e?(document.querySelector(".js-resultitle").textContent=e.field2,document.querySelector(".js-resultsubtitle").textContent=e.field3,document.querySelector(".js-resultheme").textContent=e.field4,document.querySelector(".js-resultage").textContent=`Edad recomendada: ${e.field5}`,document.querySelector(".js-resultplatform-logo").src=e.field6,document.querySelector(".js-resultcompany-logo").src=e.field7,document.querySelector(".js-resultpreview-image").src=e.photo):console.error("No se encontraron datos en el localStorage.")});
//# sourceMappingURL=index.js.map
