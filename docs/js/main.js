const w=document.querySelector("#background-choice"),j=document.querySelector("#custom-image-upload"),p=document.querySelector("#custom-image");document.querySelector(".js-preview-cover");w.addEventListener("change",function(){w.value==="custom"?j.classList.remove("hidden"):(j.classList.add("hidden"),p.value="",I())});p.addEventListener("change",function(){const e=p.files[0];if(e&&e.type.startsWith("image/")){const t=new FileReader;t.onload=function(o){const r=o.target.result;i.style.backgroundImage=`url('${r}')`},t.readAsDataURL(e)}else alert("Por favor, selecciona una imagen válida.")});const i=document.querySelector(".js-preview-cover");i.style.backgroundImage="url('/images/fantasy.png')";const d=i.querySelector(".js-cover-title"),O=document.querySelectorAll('input[name="theme"]');function I(){const e=document.querySelector('input[name="theme"]:checked').value,t=document.querySelector("#background-choice").value;d.classList.remove("fantasy-title","simulation-title","action-title","horror-title"),e==="Fantasía"?(t!=="custom"&&(i.style.backgroundImage="url('/images/fantasy.png')"),d.classList.add("fantasy-title")):e==="Simulación"?(t!=="custom"&&(i.style.backgroundImage="url('/images/simulation_6.png')"),d.classList.add("simulation-title")):e==="Acción"?(t!=="custom"&&(i.style.backgroundImage="url('/images/action.png')"),d.classList.add("action-title")):e==="Terror"&&(t!=="custom"&&(i.style.backgroundImage="url('/images/horror_5.png')"),d.classList.add("horror-title"))}O.forEach(e=>{e.addEventListener("change",I)});const k=document.querySelector(".js-input-tittle"),$=document.querySelector(".js-cover-title");document.addEventListener("DOMContentLoaded",function(){k.addEventListener("input",function(){const e=k.value.trim();$.textContent=e||"Sin título"})});const l=document.querySelector(".js-cover-subtitle"),V=document.querySelectorAll('input[name="theme"]'),E=document.querySelector(".js-input-subtitle");function C(){const e=E.value.trim();if(l.textContent=e,l.classList.remove("fantasy-subtitle","action-subtitle","simulation-subtitle","horror-subtitle"),!e)return;const t=document.querySelector('input[name="theme"]:checked').value;t==="Fantasía"?l.classList.add("fantasy-subtitle"):t==="Simulación"?l.classList.add("simulation-subtitle"):t==="Acción"?l.classList.add("action-subtitle"):t==="Terror"&&l.classList.add("horror-subtitle")}E.addEventListener("input",C);V.forEach(e=>{e.addEventListener("change",C)});const B=document.querySelectorAll('input[name="platform"]');document.querySelector(".js-imgrightbutton");function T(){const e=document.querySelector('input[name="platform"]:checked').value,t=document.getElementById("previewTop"),o=document.getElementById("previewimagePlatform");t.className="preview-top",o.src="images/ps5.svg",o.alt="Imagen de PS5",e==="PS5"?(o.src="images/ps5.svg",o.alt="Imagen de PS5"):e==="PC"?(o.src="images/pc.svg",o.alt="Imagen de PC",t.className="preview-pc"):e==="Xbox"?(o.src="images/xbox.svg",o.alt="Imagen de Xbox",t.className="preview-xbox"):e==="Switch"&&(o.src="images/switch.svg",o.alt="Imagen de Nintendo Switch",t.className="preview-switch")}B.forEach(e=>{e.addEventListener("change",T)});T();const x=document.querySelector(".js-input-age"),c=document.querySelector(".js-box");function M(){const e=parseInt(x.value);c.innerHTML=e,c.classList.remove("preview-age-rojo","preview-age-naranja","preview-age-amarillo","preview-age"),isNaN(e)||e<3||e>18?(c.innerHTML="7",c.classList.add("preview-age")):e>=12&&e<18?c.classList.add("preview-age-naranja"):e===18?c.classList.add("preview-age-rojo"):c.classList.add("preview-age")}x.addEventListener("input",M);const u=document.querySelector(".js-company"),n=document.querySelector(".js-cover-company");function _(){u.value==="ubisoft"?(n.src="images/ubisoft.svg",n.alt="Ubisoft Entertainment S. A."):u.value==="nintendo"?(n.src="images/nintendo.svg",n.alt="Nintendo Company, Ltd."):u.value==="bethesda"?(n.src="images/bethesda.svg",n.alt="Bethesda Softworks LLC"):u.value==="activision"?(n.src="images/activision.svg",n.alt="Activision Publishing, Inc."):u.value==="sega"?(n.src="images/sega.svg",n.alt="Sega Corporation"):(n.src="images/ea.svg",n.alt="Electronic Arts Inc.")}u.addEventListener("change",_);const F=document.querySelector(".js-save-button"),U=document.querySelector(".js-prelink");function J(){var S,b,L;const e=document.querySelector("#title").value.trim()||"Sin título",t=document.querySelector("#subtitle").value.trim()||"Sin subtítulo",o=parseInt(document.querySelector("#age").value,10)||7,r=(S=document.querySelector('input[name="platform"]:checked'))==null?void 0:S.value,m=(b=document.querySelector("#company"))==null?void 0:b.value,h=document.querySelector("#background-choice").value||"preset",g=document.querySelector(".js-preview-cover").style.backgroundImage,y=((L=document.querySelector('input[name="theme"]:checked'))==null?void 0:L.value)||"Fantasía",a={field1:parseInt(h==="custom"?1:2),field2:e,field3:t,field4:y,field5:o,field6:r?`/images/${r.toLowerCase()}.svg`:"",field7:m?`/images/${m.toLowerCase()}.svg`:""};if(h==="custom"&&g&&g.startsWith('url("data:image')){const s=g.match(/^url\(["']?(.+?)["']?\)$/);a.photo=s?s[1]:""}else switch(y){case"Fantasía":a.photo="/images/fantasy.png";break;case"Simulación":a.photo="/images/simulation_6.png";break;case"Acción":a.photo="/images/action.png";break;case"Terror":a.photo="/images/horror_5.png";break;default:a.photo="/images/fantasy.png"}console.log("Enviando datos:",a),localStorage.setItem("formData",JSON.stringify(a)),fetch("https://dev.adalab.es/api/info/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(s=>s.json()).then(s=>{if(s.success){console.log("Respuesta del servidor:",s),localStorage.setItem("apiData",JSON.stringify(s));const q=`result.html?id=${s.infoID}`,D=document.querySelector(".js-url-result");U.classList.remove("hidden"),D.innerHTML=`<a href="${q}" target="_blank">${q}</a>`}else console.error("Error en la respuesta del servidor:",s.error)}).catch(s=>{console.error("Error en la petición fetch:",s)})}F.addEventListener("click",function(e){e.preventDefault(),J()});const f=document.querySelector(".js-toggle-design"),v=document.querySelector(".js-toggle-fill"),N=document.querySelector(".background-choice"),P=document.querySelector(".fill_options");function A(e,t,o,r){const m=!t.classList.contains("hidden");t.classList.toggle("hidden"),e.textContent=m?"➕":"➖",r.classList.add("hidden"),o.textContent="➕"}f.addEventListener("click",()=>{A(f,N,v,P)});v.addEventListener("click",()=>{A(v,P,f,N)});document.addEventListener("DOMContentLoaded",()=>{const e=JSON.parse(localStorage.getItem("formData"));e?(document.querySelector(".js-resultitle").textContent=e.field2,document.querySelector(".js-resultsubtitle").textContent=e.field3,document.querySelector(".js-resultheme").textContent=e.field4,document.querySelector(".js-resultage").textContent=`Edad recomendada: ${e.field5}`,document.querySelector(".js-resultplatform-logo").src=e.field6,document.querySelector(".js-resultcompany-logo").src=e.field7,document.querySelector(".js-resultpreview-image").src=e.photo):console.error("No se encontraron datos en el localStorage.")});
//# sourceMappingURL=main.js.map
